<?php
if (!function_exists('obtenerEstiloHashtag')) {
  function obtenerEstiloHashtag($nombre) {
    $estilos = [
      '#urgente'  => ['color' => 'bg-red-500 text-white',   'emoji' => 'ğŸ”¥'],
      '#estudio'  => ['color' => 'bg-green-500 text-white', 'emoji' => 'ğŸ“š'],
      '#personal' => ['color' => 'bg-blue-400 text-white',  'emoji' => 'ğŸ’–'],
      '#salud'    => ['color' => 'bg-pink-400 text-white',  'emoji' => 'ğŸ§˜â€â™€ï¸'],
      '#trabajo'  => ['color' => 'bg-gray-600 text-white',  'emoji' => 'ğŸ’¼'],
    ];
    return $estilos[$nombre] ?? ['color' => 'bg-blue-300 text-white', 'emoji' => 'ğŸ·ï¸'];
  }
}
?>

<section class="bg-gray-100 p-8">
  <h1 class="text-2xl font-bold mb-6 mt-4 flex items-center gap-2">
    ğŸ—‚ï¸ GestiÃ³n de Etiquetas
  </h1>

  <!-- FORMULARIO PARA CREAR NUEVA -->
  <form method="POST" class="mb-8 flex gap-2">
    <input type="text" name="nueva_etiqueta" placeholder="#ejemplo"
           class="border rounded px-3 py-2 flex-1" required>
    <button type="submit" class="bg-green-500 text-white px-4 py-2 rounded">â• AÃ±adir</button>
  </form>

  <!-- LISTA DE ETIQUETAS -->
  <ul class="space-y-4">
    <?php foreach ($etiquetas as $e): ?>
      <?php $estilo = obtenerEstiloHashtag($e['nombre']); ?>
      <li class="bg-white p-6 rounded shadow flex flex-col sm:flex-row justify-between items-center gap-4">
        <!-- Etiqueta -->
        <span class="px-3 py-1 rounded-full text-sm font-semibold <?= $estilo['color'] ?>">
          <?= $estilo['emoji'] ?> <?= htmlspecialchars($e['nombre']) ?>
        </span>

        <!-- BotÃ³n eliminar -->
        <a href="?eliminar=<?= $e['id'] ?>" class="text-red-500 hover:underline">âŒ Eliminar</a>

        <!-- Formulario editar -->
        <form method="POST" class="flex gap-2">
          <input type="hidden" name="editar_id" value="<?= $e['id'] ?>">
          <input type="text" name="nuevo_nombre" value="<?= htmlspecialchars($e['nombre']) ?>"
                 class="border rounded px-2 py-1" required>
          <button type="submit" class="bg-yellow-400 text-white px-3 py-1 rounded">âœï¸</button>
        </form>
      </li>
    <?php endforeach; ?>
  </ul>
</section>


